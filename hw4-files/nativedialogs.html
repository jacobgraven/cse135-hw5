<!DOCTYPE html>
<html>

<head>
  <!-- <script src="./node_modules/dompurify/dist/purify.js"></script> -->
  <script src="https://unpkg.com/dompurify@2.4.1/dist/purify.js"></script>
</head>

<body>
  <header>
    <h1>Simple Dialogs</h1>
  </header>
  <main>
    <button id="alert-button">Alert</button>
    <button id="confirm-button">Confirm</button>
    <button id="prompt-button">Prompt</button>
    <button id="safe-prompt-button">Safer Prompt</button>
    <hr />
    <output id="output"></output>
    <script>
      alertButton = document.getElementById("alert-button");
      confirmButton = document.getElementById("confirm-button");
      promptButton = document.getElementById("prompt-button");
      safePrompButton = document.getElementById("safe-prompt-button");

      output = document.getElementById("output");

      /* Alert */
      alertButton.addEventListener("click", () => { 
        output.innerHTML = "";
        setTimeout(function() {
          alert("Whats up!"); 
        }, 0);
      });

      /* Confirm */
      confirmButton.addEventListener("click", () => {
        output.innerHTML = "";
        setTimeout(function () {
          let returnValue = confirm("Confirm choice");
          output.innerHTML = `Confirm dialog result: ${returnValue}`;
        }, 0);
      });

      /* Prompt */
      promptButton.addEventListener("click", () => {
        output.innerHTML = "";
        setTimeout(function () {
          let promptValue = prompt("How old are you?", "");
          if (promptValue == null || promptValue == "") {
            output.innerHTML = "User didn't enter anything.";
          } else {
            output.innerHTML = `Prompt dialog result: ${promptValue}`
            // output.value = "The value returned by the prompt method is: " + promptValue;
          }
        }, 0);
      });

      /*Safe Prompt */
      safePrompButton.addEventListener("click", () => {
        output.innerHTML = "";
        setTimeout(function() {
          let promptValue = prompt("What is the meaning of life?", "");
          let cleanValue = DOMPurify.sanitize(promptValue);
          if (cleanValue == null || cleanValue == "") {
            output.innerHTML = "User didn't enter anything.";
          } else {
            output.innerHTML = `Prompt dialog result: ${cleanValue}`
          }
        }, 0);
      });
    </script>
  </main>
</body>

</html>